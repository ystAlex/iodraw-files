```mermaid
%%{init: {"theme": "base", "themeVariables": {
  "primaryColor": "#E3F2FD",
  "primaryBorderColor": "#2196F3",
  "primaryTextColor": "#0D47A1",
  "secondaryColor": "#FFF3E0",
  "secondaryBorderColor": "#FB8C00",
  "tertiaryColor": "#E8F5E9",
  "tertiaryBorderColor": "#43A047"
}}}%%
flowchart TD
    A([fa:fa-users 节点集合]):::start --> B([fa:fa-calculator 计算节点信誉值]):::process
    B --> C([fa:fa-sort-amount-down 按信誉值降序排序]):::process
    C --> D([fa:fa-cubes 初始化 K 个空分片]):::process
    
    D --> E{fa:fa-list 遍历排序后节点列表}:::decision
    E --> F([fa:fa-balance-scale 选择当前总信誉值最小的分片]):::process
    F --> G([fa:fa-plus-circle 将当前节点分配至该分片]):::process
    G --> H([fa:fa-sync 更新分片总信誉值]):::process
    H --> E
    
    E -- 所有节点分配完毕 --> I([fa:fa-flag 输出分片结果]):::end

    %% 样式定义
    classDef start fill:#BBDEFB,stroke:#1565C0,stroke-width:2px,color:#0D47A1;
    classDef process fill:#E3F2FD,stroke:#2196F3,stroke-width:2px,color:#0D47A1;
    classDef decision fill:#FFF3E0,stroke:#FB8C00,stroke-width:2px,color:#E65100;
    classDef end fill:#E8F5E9,stroke:#2E7D32,stroke-width:2px,color:#1B5E20;

```